<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto Tutorial Screen Recorder</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .main-content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        .recording-area {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }

        .ai-features {
            background: rgba(255,255,255,0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }

        .record-button {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            border: none;
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 20px auto;
            display: block;
            box-shadow: 0 8px 25px rgba(255,107,107,0.4);
        }

        .record-button:hover {
            transform: scale(1.05);
            box-shadow: 0 12px 35px rgba(255,107,107,0.6);
        }

        .record-button.recording {
            background: linear-gradient(135deg, #ff4757, #c44569);
            animation: pulse 2s infinite;
        }

        .record-button.stop {
            background: linear-gradient(135deg, #2ed573, #1e90ff);
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .timer {
            text-align: center;
            font-size: 2rem;
            font-weight: bold;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
        }

        .preview-area {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
            border: 2px dashed rgba(255,255,255,0.3);
        }

        .video-player {
            width: 100%;
            height: 100%;
            border-radius: 10px;
        }

        .feature-item {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid #4ecdc4;
        }

        .feature-item h3 {
            margin-bottom: 8px;
            color: #4ecdc4;
        }

        .feature-item p {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255,255,255,0.2);
            border-radius: 3px;
            margin: 10px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4ecdc4, #44a08d);
            width: 0%;
            transition: width 0.3s ease;
        }

        .step-counter {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            font-size: 0.9rem;
        }

        .export-section {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            display: none;
        }

        .export-section.show {
            display: block;
        }

        .download-buttons {
            display: flex;
            gap: 15px;
            margin: 20px 0;
        }

        .download-btn {
            flex: 1;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(78,205,196,0.4);
        }

        .stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        .stat-item {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #4ecdc4;
        }

        .processing-indicator {
            display: none;
            text-align: center;
            margin: 20px 0;
        }

        .processing-indicator.show {
            display: block;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255,255,255,0.3);
            border-top: 4px solid #4ecdc4;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .subtitle-preview {
            background: rgba(0,0,0,0.8);
            border-radius: 5px;
            padding: 10px;
            margin: 10px 0;
            font-style: italic;
            border-left: 3px solid #4ecdc4;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üé• Auto Tutorial Screen Recorder</h1>
            <p>AI-powered screen recording that creates professional tutorials automatically</p>
        </div>

        <div class="main-content">
            <div class="recording-area">
                <h2>Recording Studio</h2>
                <button class="record-button" id="recordBtn">
                    üî¥ Start Recording
                </button>
                <div class="timer" id="timer">00:00</div>
                
                <div class="preview-area" id="previewArea">
                    <div id="previewText">Click "Start Recording" to begin</div>
                    <video id="previewVideo" class="video-player" style="display: none;" autoplay muted></video>
                    <video id="recordedVideo" class="video-player" style="display: none;" controls></video>
                </div>

                <div class="processing-indicator" id="processingIndicator">
                    <div class="spinner"></div>
                    <p>AI is processing your recording...</p>
                </div>
            </div>

            <div class="ai-features">
                <h2>ü§ñ AI Features</h2>
                
                <div class="feature-item">
                    <h3>Auto-Generated Subtitles</h3>
                    <p>Converting speech to accurate captions...</p>
                    <div class="progress-bar">
                        <div class="progress-fill" id="subtitleProgress"></div>
                    </div>
                    <div class="subtitle-preview" id="subtitlePreview" style="display: none;">
                        "Welcome to this tutorial..."
                    </div>
                </div>

                <div class="feature-item">
                    <h3>Smart Auto-Trim</h3>
                    <p>Removing idle moments and pauses...</p>
                    <div class="progress-bar">
                        <div class="progress-fill" id="trimProgress"></div>
                    </div>
                    <div id="trimStats" style="display: none; margin-top: 10px;">
                        ‚úÇÔ∏è Removed: <span id="trimmedTime">0</span> seconds
                    </div>
                </div>

                <div class="feature-item">
                    <h3>Step Detection</h3>
                    <p>Identifying clicks and key actions...</p>
                    <div class="step-counter">
                        <span>Clicks: <span id="clickCount">0</span></span>
                        <span>Keystrokes: <span id="keyCount">0</span></span>
                        <span>Windows: <span id="windowCount">0</span></span>
                    </div>
                </div>

                <div class="feature-item">
                    <h3>Export Ready</h3>
                    <p>Optimized for YouTube and social media</p>
                    <div class="step-counter">
                        <span>Format: MP4</span>
                        <span>Quality: 1080p</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="export-section" id="exportSection">
            <h2>üì§ Export & Download</h2>
            
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-value" id="originalSize">2.4 MB</div>
                    <div>Original Size</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="compressedSize">856 KB</div>
                    <div>Optimized Size</div>
                </div>
            </div>

            <div class="download-buttons">
                <button class="download-btn" onclick="downloadVideo()">
                    üìπ Download MP4
                </button>
                <button class="download-btn" onclick="downloadSubtitles()">
                    üìù Download SRT
                </button>
            </div>

            <div style="text-align: center; margin-top: 20px;">
                <p>‚úÖ Video optimized and ready for YouTube upload!</p>
            </div>
        </div>
    </div>

    <script>
        let mediaRecorder;
        let recordedChunks = [];
        let startTime;
        let timerInterval;
        let stream;

        const recordBtn = document.getElementById('recordBtn');
        const timer = document.getElementById('timer');
        const previewArea = document.getElementById('previewArea');
        const previewText = document.getElementById('previewText');
        const previewVideo = document.getElementById('previewVideo');
        const recordedVideo = document.getElementById('recordedVideo');
        const processingIndicator = document.getElementById('processingIndicator');
        const exportSection = document.getElementById('exportSection');

        recordBtn.addEventListener('click', toggleRecording);

        async function toggleRecording() {
            console.log('üéØ Toggle recording clicked');
            
            if (recordBtn.textContent.includes('Start')) {
                await startRecording();
            } else if (recordBtn.textContent.includes('Stop') || recordBtn.textContent.includes('Demo')) {
                if (recordBtn.textContent.includes('Demo')) {
                    stopDemoMode();
                } else {
                    stopRecording();
                }
            }
        }

        async function startRecording() {
            console.log('üé¨ Starting recording...');
            
            try {
                // Check if browser supports screen capture
                if (!navigator.mediaDevices || !navigator.mediaDevices.getDisplayMedia) {
                    throw new Error('Screen capture not supported in this browser');
                }

                console.log('üì∫ Requesting screen access...');
                
                stream = await navigator.mediaDevices.getDisplayMedia({
                    video: { 
                        mediaSource: 'screen',
                        width: { ideal: 1920 },
                        height: { ideal: 1080 }
                    },
                    audio: true
                });

                console.log('‚úÖ Screen access granted!');

                previewVideo.srcObject = stream;
                previewVideo.style.display = 'block';
                previewText.style.display = 'none';

                // Check MediaRecorder support
                if (!MediaRecorder.isTypeSupported('video/webm')) {
                    console.warn('WebM not supported, trying mp4...');
                    if (!MediaRecorder.isTypeSupported('video/mp4')) {
                        throw new Error('No supported video format found');
                    }
                }

                mediaRecorder = new MediaRecorder(stream, {
                    mimeType: MediaRecorder.isTypeSupported('video/webm') ? 'video/webm' : 'video/mp4'
                });
                recordedChunks = [];

                mediaRecorder.ondataavailable = (event) => {
                    console.log('üìº Recording data received:', event.data.size, 'bytes');
                    if (event.data.size > 0) {
                        recordedChunks.push(event.data);
                    }
                };

                mediaRecorder.onstop = handleRecordingStop;

                mediaRecorder.start(1000); // Record in 1-second chunks
                startTime = Date.now();
                
                recordBtn.textContent = '‚èπÔ∏è Stop Recording';
                recordBtn.classList.add('recording');
                recordBtn.classList.add('stop');

                startTimer();
                startAISimulation();

                console.log('üî¥ Recording started successfully!');

            } catch (err) {
                console.error('‚ùå Recording error:', err);
                
                let errorMessage = 'Could not start recording. ';
                if (err.name === 'NotAllowedError') {
                    errorMessage += 'Please grant screen capture permission when prompted.';
                } else if (err.name === 'NotSupportedError') {
                    errorMessage += 'Screen recording is not supported in this browser. Please use Chrome or Edge.';
                } else if (err.message.includes('not supported')) {
                    errorMessage += 'This browser doesn\'t support screen recording. Please use Chrome or Edge.';
                } else {
                    errorMessage += 'Error: ' + err.message;
                }
                
                alert(errorMessage + '\n\nTrying demo mode instead...');
                
                // Fallback to demo mode
                startDemoMode();
            }
        }

        function stopRecording() {
            mediaRecorder.stop();
            stream.getTracks().forEach(track => track.stop());
            
            recordBtn.textContent = 'üî¥ Start Recording';
            recordBtn.classList.remove('recording', 'stop');
            
            clearInterval(timerInterval);
            
            // Show processing indicator
            processingIndicator.classList.add('show');
            previewVideo.style.display = 'none';
            
            // Simulate AI processing
            simulateAIProcessing();
        }

        function handleRecordingStop() {
            const blob = new Blob(recordedChunks, { type: 'video/webm' });
            const url = URL.createObjectURL(blob);
            
            setTimeout(() => {
                processingIndicator.classList.remove('show');
                recordedVideo.src = url;
                recordedVideo.style.display = 'block';
                exportSection.classList.add('show');
                
                // Store the blob for download
                window.recordedBlob = blob;
            }, 3000);
        }

        function startTimer() {
            timerInterval = setInterval(() => {
                const elapsed = Date.now() - startTime;
                const seconds = Math.floor(elapsed / 1000);
                const minutes = Math.floor(seconds / 60);
                const remainingSeconds = seconds % 60;
                
                timer.textContent = 
                    `${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`;
            }, 1000);
        }

        function startAISimulation() {
            // Simulate step detection
            let clicks = 0, keys = 0, windows = 0;
            
            const stepInterval = setInterval(() => {
                if (recordBtn.classList.contains('recording')) {
                    // Random step detection
                    if (Math.random() > 0.7) {
                        clicks += Math.floor(Math.random() * 3) + 1;
                        document.getElementById('clickCount').textContent = clicks;
                    }
                    if (Math.random() > 0.8) {
                        keys += Math.floor(Math.random() * 5) + 1;
                        document.getElementById('keyCount').textContent = keys;
                    }
                    if (Math.random() > 0.9) {
                        windows += 1;
                        document.getElementById('windowCount').textContent = windows;
                    }
                } else {
                    clearInterval(stepInterval);
                }
            }, 2000);
        }

        function simulateAIProcessing() {
            // Simulate subtitle progress
            animateProgress('subtitleProgress', 3000, () => {
                document.getElementById('subtitlePreview').style.display = 'block';
            });

            // Simulate trim progress
            setTimeout(() => {
                animateProgress('trimProgress', 2000, () => {
                    document.getElementById('trimStats').style.display = 'block';
                    document.getElementById('trimmedTime').textContent = Math.floor(Math.random() * 15) + 5;
                });
            }, 1000);
        }

        function animateProgress(elementId, duration, callback) {
            const element = document.getElementById(elementId);
            let progress = 0;
            const interval = setInterval(() => {
                progress += (100 / (duration / 100));
                element.style.width = Math.min(progress, 100) + '%';
                
                if (progress >= 100) {
                    clearInterval(interval);
                    if (callback) callback();
                }
            }, 100);
        }

        function downloadVideo() {
            if (window.recordedBlob) {
                const url = URL.createObjectURL(window.recordedBlob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'tutorial-recording.webm';
                a.click();
            } else {
                alert('No recording available to download');
            }
        }

        // Add demo mode fallback
        function startDemoMode() {
            console.log('üé≠ Starting demo mode...');
            
            // Show demo video placeholder
            previewText.innerHTML = 'üé¨ DEMO MODE: Simulating screen recording...';
            previewText.style.display = 'block';
            previewText.style.background = 'rgba(255,193,7,0.2)';
            previewText.style.padding = '20px';
            previewText.style.borderRadius = '10px';
            previewText.style.border = '2px dashed #ffc107';
            
            startTime = Date.now();
            recordBtn.textContent = '‚èπÔ∏è Stop Demo';
            recordBtn.classList.add('recording');
            recordBtn.classList.add('stop');
            
            startTimer();
            startAISimulation();
            
            // Auto-stop after 10 seconds for demo
            setTimeout(() => {
                if (recordBtn.classList.contains('recording')) {
                    stopDemoMode();
                }
            }, 10000);
        }
        
        function stopDemoMode() {
            console.log('‚è∏Ô∏è Stopping demo mode...');
            
            recordBtn.textContent = 'üî¥ Start Recording';
            recordBtn.classList.remove('recording', 'stop');
            clearInterval(timerInterval);
            
            // Show processing
            processingIndicator.classList.add('show');
            previewText.style.display = 'none';
            
            // Create a demo blob for download
            setTimeout(() => {
                processingIndicator.classList.remove('show');
                previewText.innerHTML = '‚úÖ Demo recording completed!<br><small>In real mode, your actual screen recording would appear here.</small>';
                previewText.style.display = 'block';
                exportSection.classList.add('show');
                
                // Create dummy blob for demo download
                window.recordedBlob = new Blob(['Demo video content'], { type: 'video/webm' });
            }, 3000);
        }
            const srtContent = `1
00:00:00,000 --> 00:00:05,000
Welcome to this tutorial...

2
00:00:05,000 --> 00:00:10,000
In this video, we'll be showing you how to...`;

            const blob = new Blob([srtContent], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'tutorial-subtitles.srt';
            a.click();
        }

        // Add some demo subtitle updates
        const demoSubtitles = [
            "Welcome to this tutorial...",
            "First, let's open the application...", 
            "Now we'll click on the menu button...",
            "Next, we'll configure the settings...",
            "Finally, we'll save our work..."
        ];

        let subtitleIndex = 0;
        setInterval(() => {
            if (recordBtn.classList.contains('recording')) {
                document.getElementById('subtitlePreview').textContent = 
                    `"${demoSubtitles[subtitleIndex % demoSubtitles.length]}"`;
                subtitleIndex++;
            }
        }, 4000);
    </script>
</body>
</html>
